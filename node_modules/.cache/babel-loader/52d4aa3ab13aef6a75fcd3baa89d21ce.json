{"ast":null,"code":"import { createCommentVNode as _createCommentVNode, createElementVNode as _createElementVNode, vModelText as _vModelText, withDirectives as _withDirectives, toDisplayString as _toDisplayString, openBlock as _openBlock, createElementBlock as _createElementBlock, createTextVNode as _createTextVNode, resolveComponent as _resolveComponent, withCtx as _withCtx, createVNode as _createVNode, withModifiers as _withModifiers, Fragment as _Fragment, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\";\n\nconst _withScopeId = n => (_pushScopeId(\"data-v-8dac4566\"), n = n(), _popScopeId(), n);\n\nconst _hoisted_1 = {\n  class: \"login\"\n};\n\nconst _hoisted_2 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"h1\", null, \"Đăng Nhập\", -1\n/* HOISTED */\n));\n\nconst _hoisted_3 = {\n  class: \"component-item\"\n};\nconst _hoisted_4 = {\n  class: \"component-item\"\n};\nconst _hoisted_5 = {\n  key: 0\n};\nconst _hoisted_6 = {\n  key: 0\n};\nconst _hoisted_7 = {\n  class: \"component-item\",\n  id: \"btn\"\n};\nconst _hoisted_8 = {\n  class: \"component-item\",\n  id: \"btn1\"\n};\n\nconst _hoisted_9 = /*#__PURE__*/_createTextVNode(\" Đăng nhập với Facebook \");\n\nconst _hoisted_10 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"svg\", {\n  xmlns: \"http://www.w3.org/2000/svg\",\n  width: \"16\",\n  height: \"16\",\n  fill: \"currentColor\",\n  class: \"bi bi-facebook\",\n  viewBox: \"0 0 16 16\"\n}, [/*#__PURE__*/_createElementVNode(\"path\", {\n  d: \"M16 8.049c0-4.446-3.582-8.05-8-8.05C3.58 0-.002 3.603-.002 8.05c0 4.017 2.926 7.347 6.75 7.951v-5.625h-2.03V8.05H6.75V6.275c0-2.017 1.195-3.131 3.022-3.131.876 0 1.791.157 1.791.157v1.98h-1.009c-.993 0-1.303.621-1.303 1.258v1.51h2.218l-.354 2.326H9.25V16c3.824-.604 6.75-3.934 6.75-7.951z\"\n})], -1\n/* HOISTED */\n));\n\nconst _hoisted_11 = [_hoisted_9, _hoisted_10];\nconst _hoisted_12 = {\n  class: \"change-route\"\n};\n\nconst _hoisted_13 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"span\", null, \"Bạn chưa có tài khoản?\", -1\n/* HOISTED */\n));\n\nconst _hoisted_14 = /*#__PURE__*/_createTextVNode(\"Đăng Ký\");\n\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_router_link = _resolveComponent(\"router-link\");\n\n  const _component_web_footer = _resolveComponent(\"web-footer\");\n\n  return _openBlock(), _createElementBlock(_Fragment, null, [_createCommentVNode(\" <web-header /> \"), _createElementVNode(\"div\", _hoisted_1, [_hoisted_2, _createElementVNode(\"form\", {\n    onSubmit: _cache[4] || (_cache[4] = _withModifiers((...args) => $options.submitForm && $options.submitForm(...args), [\"prevent\"])),\n    class: \"components\"\n  }, [_createElementVNode(\"div\", _hoisted_3, [_withDirectives(_createElementVNode(\"input\", {\n    type: \"text\",\n    name: \"\",\n    id: \"email\",\n    placeholder: \"Email đăng nhập\",\n    \"onUpdate:modelValue\": _cache[0] || (_cache[0] = $event => $setup.state.email = $event)\n  }, null, 512\n  /* NEED_PATCH */\n  ), [[_vModelText, $setup.state.email]]), _createCommentVNode(\" <span v-if=\\\"v$.email.$error\\\">\\r\\n          {{ v$.email.$errors[0].$message }}\\r\\n        </span> \")]), _createElementVNode(\"div\", _hoisted_4, [_withDirectives(_createElementVNode(\"input\", {\n    type: \"password\",\n    id: \"password\",\n    placeholder: \"Mật khẩu\",\n    \"onUpdate:modelValue\": _cache[1] || (_cache[1] = $event => $setup.state.password = $event)\n  }, null, 512\n  /* NEED_PATCH */\n  ), [[_vModelText, $setup.state.password]]), $setup.v$.password.$error ? (_openBlock(), _createElementBlock(\"span\", _hoisted_5, _toDisplayString($setup.v$.password.$errors[0].$message), 1\n  /* TEXT */\n  )) : _createCommentVNode(\"v-if\", true)]), $setup.errMsg ? (_openBlock(), _createElementBlock(\"p\", _hoisted_6, _toDisplayString($setup.errMsg), 1\n  /* TEXT */\n  )) : _createCommentVNode(\"v-if\", true), _createElementVNode(\"div\", _hoisted_7, [_createElementVNode(\"button\", {\n    onClick: _cache[2] || (_cache[2] = (...args) => $setup.checkLogin && $setup.checkLogin(...args)),\n    type: \"submit\"\n  }, \"Đăng nhập\")]), _createElementVNode(\"div\", _hoisted_8, [_createElementVNode(\"a\", {\n    id: \"fb\",\n    onClick: _cache[3] || (_cache[3] = (...args) => $setup.fbLogin && $setup.fbLogin(...args))\n  }, _hoisted_11)]), _createElementVNode(\"div\", _hoisted_12, [_hoisted_13, _createElementVNode(\"span\", null, [_createVNode(_component_router_link, {\n    id: \"route\",\n    to: \"/signup\"\n  }, {\n    default: _withCtx(() => [_hoisted_14]),\n    _: 1\n    /* STABLE */\n\n  })])])], 32\n  /* HYDRATE_EVENTS */\n  )]), _createVNode(_component_web_footer)], 64\n  /* STABLE_FRAGMENT */\n  );\n}","map":{"version":3,"mappings":";;;;;AAEOA,OAAK,EAAC;;;gEACTC,oBAAkB,IAAlB,EAAkB,IAAlB,EAAI,WAAJ,EAAa;AAAA;AAAb;;;AAEOD,OAAK,EAAC;;;AAYNA,OAAK,EAAC;;;;;;;;;AAYNA,OAAK,EAAC;AAAiBE,IAAE,EAAC;;;AAG1BF,OAAK,EAAC;AAAiBE,IAAE,EAAC;;;iDACD;;iEAE1BD,oBAWM,KAXN,EAWM;AAVJE,OAAK,EAAC,4BAUF;AATJC,OAAK,EAAC,IASF;AARJC,QAAM,EAAC,IAQH;AAPJC,MAAI,EAAC,cAOD;AANJN,OAAK,EAAC,gBAMF;AALJO,SAAO,EAAC;AAKJ,CAXN,gBAQEN,oBAEE,MAFF,EAEE;AADAO,GAAC,EAAC;AACF,CAFF,EARF;;AAAA;;iCAAAC;;AAcCT,OAAK,EAAC;;;iEACTC,oBAAmC,MAAnC,EAAmC,IAAnC,EAAM,wBAAN,EAA4B;AAAA;AAA5B;;kDAC2C;;;;;;;6DAlDjDS,yCACAT,oBAoDM,KApDN,cAoDM,CAnDJU,UAmDI,EAlDJV,oBAiDO,MAjDP,EAiDO;AAjDAW,YAAM,wDAAUC,mDAAV,EAAoB,WAApB,EAiDN;AAjD4Bb,SAAK,EAAC;AAiDlC,GAjDP,GACEC,oBAWM,KAXN,cAWM,iBAVJA,oBAME,OANF,EAME;AALAa,QAAI,EAAC,MAKL;AAJAC,QAAI,EAAC,EAIL;AAHAb,MAAE,EAAC,OAGH;AAFAc,eAAW,EAAC,iBAEZ;+DADSC,aAAMC,QAAKC;AACpB,GANF;;AAAA,oBAKWF,aAAMC,QAKb,EAHJR,2HAGI,CAXN,GAYAT,oBAUM,KAVN,cAUM,iBATJA,oBAKE,OALF,EAKE;AAJAa,QAAI,EAAC,UAIL;AAHAZ,MAAE,EAAC,UAGH;AAFAc,eAAW,EAAC,UAEZ;+DADSC,aAAMG,WAAQD;AACvB,GALF;;AAAA,oBAIWF,aAAMG,WAKb,EAHQH,UAAGG,QAAH,CAAYC,wBAAxBC,oBAEO,MAFP,EAEOC,UAFP,EAEOC,iBADFP,UAAGG,QAAH,CAAYK,OAAZ,CAAmB,CAAnB,EAAuBC,QACrB,CAFP,EACoC;AAAA;AADpC,wCAGI,CAVN,GAWST,+BAATK,oBAAiC,GAAjC,EAAiCK,UAAjC,EAAiCH,iBAAbP,aAAa,CAAjC,EAA0B;AAAA;AAA1B,0CACAhB,oBAEM,KAFN,cAEM,CADJA,oBAA4D,QAA5D,EAA4D;AAAnD2B,WAAK,yCAAEX,+CAAF,CAA8C;AAAhCH,QAAI,EAAC;AAA2B,GAA5D,EAA0C,WAA1C,CACI,CAFN,GAGAb,oBAgBM,KAhBN,cAgBM,CAfJA,oBAcI,GAdJ,EAcI;AAdDC,MAAE,EAAC,IAcF;AAdQ0B,WAAK,yCAAEX,yCAAF;AAcb,GAdJ,cAeI,CAhBN,GAiBAhB,oBAGM,KAHN,eAGM,CAFJ4B,WAEI,EADJ5B,oBAAuE,MAAvE,EAAuE,IAAvE,EAAuE,CAAjE6B,aAA0DC,sBAA1D,EAA0D;AAA7C7B,MAAE,EAAC,OAA0C;AAAlC8B,MAAE,EAAC;AAA+B,GAA1D;sBAAqC,MAAO;;;;GAA5C,CAAiE,CAAvE,CACI,CAHN,EA7CF;;AAAA,GAkDI,CApDN,GAqDAF,aAAcG,qBAAd","names":["class","_createElementVNode","id","xmlns","width","height","fill","viewBox","d","_hoisted_10","_createCommentVNode","_hoisted_2","onSubmit","$options","type","name","placeholder","$setup","email","$event","password","$error","_createElementBlock","_hoisted_5","_toDisplayString","$errors","$message","_hoisted_6","onClick","_hoisted_13","_createVNode","_component_router_link","to","_component_web_footer"],"sourceRoot":"","sources":["D:\\Java\\movie-website-project-1\\src\\components\\LoginForm.vue"],"sourcesContent":["<template>\r\n  <!-- <web-header /> -->\r\n  <div class=\"login\">\r\n    <h1>Đăng Nhập</h1>\r\n    <form @submit.prevent=\"submitForm\" class=\"components\">\r\n      <div class=\"component-item\">\r\n        <input\r\n          type=\"text\"\r\n          name=\"\"\r\n          id=\"email\"\r\n          placeholder=\"Email đăng nhập\"\r\n          v-model=\"state.email\"\r\n        />\r\n        <!-- <span v-if=\"v$.email.$error\">\r\n          {{ v$.email.$errors[0].$message }}\r\n        </span> -->\r\n      </div>\r\n      <div class=\"component-item\">\r\n        <input\r\n          type=\"password\"\r\n          id=\"password\"\r\n          placeholder=\"Mật khẩu\"\r\n          v-model=\"state.password\"\r\n        />\r\n        <span v-if=\"v$.password.$error\">\r\n          {{ v$.password.$errors[0].$message }}\r\n        </span>\r\n      </div>\r\n      <p v-if=\"errMsg\">{{ errMsg }}</p>\r\n      <div class=\"component-item\" id=\"btn\">\r\n        <button @click=\"checkLogin\" type=\"submit\">Đăng nhập</button>\r\n      </div>\r\n      <div class=\"component-item\" id=\"btn1\">\r\n        <a id=\"fb\" @click=\"fbLogin\">\r\n          Đăng nhập với Facebook\r\n          <svg\r\n            xmlns=\"http://www.w3.org/2000/svg\"\r\n            width=\"16\"\r\n            height=\"16\"\r\n            fill=\"currentColor\"\r\n            class=\"bi bi-facebook\"\r\n            viewBox=\"0 0 16 16\"\r\n          >\r\n            <path\r\n              d=\"M16 8.049c0-4.446-3.582-8.05-8-8.05C3.58 0-.002 3.603-.002 8.05c0 4.017 2.926 7.347 6.75 7.951v-5.625h-2.03V8.05H6.75V6.275c0-2.017 1.195-3.131 3.022-3.131.876 0 1.791.157 1.791.157v1.98h-1.009c-.993 0-1.303.621-1.303 1.258v1.51h2.218l-.354 2.326H9.25V16c3.824-.604 6.75-3.934 6.75-7.951z\"\r\n            />\r\n          </svg>\r\n        </a>\r\n      </div>\r\n      <div class=\"change-route\">\r\n        <span>Bạn chưa có tài khoản?</span>\r\n        <span><router-link id=\"route\" to=\"/signup\">Đăng Ký</router-link></span>\r\n      </div>\r\n    </form>\r\n  </div>\r\n  <web-footer />\r\n</template>\r\n\r\n<script>\r\nimport useValidate from \"@vuelidate/core\";\r\nimport { required, minLength } from \"@vuelidate/validators\";\r\nimport { computed, reactive, ref, onMounted } from \"vue\";\r\n// import WebHeader from \"./WebHeader.vue\";\r\nimport WebFooter from \"./WebFooter.vue\";\r\n// import axios from \"axios\";\r\nimport {\r\n  getAuth,\r\n  signInWithPopup,\r\n  FacebookAuthProvider,\r\n} from \"firebase/auth\";\r\nimport router from \"@/router\";\r\nimport axios from 'axios';\r\nexport default {\r\n  components: {\r\n    WebFooter,\r\n  },\r\n  setup() {\r\n    const state = reactive({\r\n      clientToken: \"\",\r\n      username: \"\",\r\n      password: \"\",\r\n    });\r\n\r\n    const checkLogin = onMounted(() => {\r\n      fetch(\"http://localhost:8081/auth/login\", {\r\n        method: \"POST\",\r\n        headers: {\r\n          'Authorization': 'Bearer ' + this.state.clientToken,\r\n          \"Content-Type\": \"application/json\",\r\n        },\r\n        body: JSON.stringify({\r\n          username: state.username,\r\n          password: state.password,\r\n        }),\r\n      })\r\n        .then((res) => res.json())\r\n        .then((response) => {\r\n          console.log(response);\r\n          if (response.statusCode === 200) {\r\n            localStorage.setItem(\"userInfo\", JSON.stringify(response.userInfo));\r\n            router.push(\"/\");\r\n          }\r\n        });\r\n    });\r\n\r\n    //LOGIN FACEBOOK\r\n    const auth = getAuth();\r\n    const provider = new FacebookAuthProvider();\r\n    const errMsg = ref();\r\n    const fbLogin = () => {\r\n      signInWithPopup(auth, provider).then(() => {\r\n        router.push(\"/\");\r\n      });\r\n    };\r\n\r\n    // LOGIN USER\r\n    const login = (user) => {\r\n      // signInWithEmailAndPassword(auth, state.username, state.password)\r\n      //   .then(() => {\r\n      //     router.push(\"/\");\r\n      //   })\r\n      //   .catch((error) => {\r\n      //     switch (error.code) {\r\n      //       case \"auth/invalid-email\":\r\n      //         errMsg.value = \"Invalid email\";\r\n      //         break;\r\n      //       case \"auth/user-not-found\":\r\n      //         errMsg.value = \"No account with that email was found\";\r\n      //         break;\r\n      //       case \"auth/wrong-password\":\r\n      //         errMsg.value = \"Incorrect password\";\r\n      //         break;\r\n      //       default:\r\n      //         errMsg.value = \"Email or password was incorrect\";\r\n      //         break;\r\n      //     }\r\n      //   });\r\n        axios.post(\"http://localhost:8081/auth/login\", {\r\n          username:user.username,\r\n          password:user.password\r\n        }).then(response=> {\r\n          console.log(response.data)\r\n          if(response.data.accessToken) {\r\n            localStorage.setItem('user', JSON.stringify(response.data))\r\n          }\r\n          return response.data\r\n        })\r\n    };\r\n\r\n    //CHECK VALIDATION FORM\r\n    const rules = computed(() => {\r\n      return {\r\n        // username: { required, username },\r\n        password: {\r\n          password: required,\r\n          minLength: minLength(6),\r\n        },\r\n      };\r\n    });\r\n\r\n    const v$ = useValidate(rules, state);\r\n    //\r\n    return {\r\n      state,\r\n      v$,\r\n      checkLogin,\r\n      login,\r\n      fbLogin,\r\n      errMsg,\r\n    };\r\n  },\r\n  methods: {\r\n    submitForm() {\r\n      this.v$.$validate();\r\n    },\r\n  },\r\n};\r\n</script>\r\n<style scoped>\r\nlabel {\r\n  font-size: 20px;\r\n}\r\n.components {\r\n  display: flex;\r\n  flex-direction: column;\r\n  border-top: 2px;\r\n  padding-left: 20px;\r\n}\r\n.login {\r\n  box-sizing: content-box;\r\n  max-width: 500px;\r\n  border: none;\r\n  border-radius: 10px;\r\n  margin: 0 auto;\r\n  margin-top: 100px;\r\n  background: linear-gradient(to bottom right, rgb(223, 119, 209), #1cd1d1);\r\n}\r\n.login input {\r\n  padding-left: 15px;\r\n  margin-top: 20px;\r\n  margin-bottom: 40px;\r\n  width: 460px;\r\n  height: 50px;\r\n  border-radius: 5px;\r\n  border: none;\r\n}\r\n#btn {\r\n  padding-top: 20px;\r\n  padding-bottom: 40px;\r\n}\r\n.login button {\r\n  text-align: center;\r\n  font-size: 20px;\r\n  width: 460px;\r\n  height: 50px;\r\n  color: #fff;\r\n  background-color: rgb(26, 103, 85);\r\n  border: none;\r\n  border-radius: 5px;\r\n}\r\n.login h1 {\r\n  color: #000;\r\n  font-family: \"Trebuchet MS\", \"Lucida Sans Unicode\", \"Lucida Grande\",\r\n    \"Lucida Sans\", Arial, sans-serif;\r\n  text-align: center;\r\n  padding-top: 20px;\r\n  padding-bottom: 10px;\r\n  border-bottom: 2px solid rgb(212, 199, 199);\r\n  width: 430px;\r\n  margin: 20px auto;\r\n}\r\n.change-route {\r\n  margin-bottom: 30px;\r\n  text-align: center;\r\n}\r\n.component-item span {\r\n  color: rgb(180, 32, 32);\r\n}\r\np {\r\n  color: rgb(180, 32, 32);\r\n  text-align: center;\r\n  text-transform: uppercase;\r\n  font-weight: 500;\r\n}\r\n#fb {\r\n  width: 300px;\r\n  height: 30px;\r\n  text-decoration: underline;\r\n  color: rgb(64, 64, 188);\r\n  cursor: pointer;\r\n}\r\n#btn1 {\r\n  margin-left: auto;\r\n  margin-right: auto;\r\n  margin-bottom: 20px;\r\n}\r\n#route {\r\n  color: green;\r\n}\r\n</style>\r\n"]},"metadata":{},"sourceType":"module"}