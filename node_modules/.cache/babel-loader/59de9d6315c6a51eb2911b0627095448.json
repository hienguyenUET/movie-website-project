{"ast":null,"code":"// import {\n//   getStorage,\n//   ref as stRef,\n//   uploadBytes,\n//   getDownloadURL,\n// } from \"firebase/storage\";\n// import { getDatabase, ref as dbRef, push, set } from \"firebase/database\";\nimport { onMounted, reactive } from \"vue\"; // import { getAuth, onAuthStateChanged, updateProfile } from \"firebase/auth\";\n\nimport axios from \"axios\";\nexport default {\n  setup() {\n    const userInfo = reactive({\n      email: \"\",\n      userName: \"\",\n      role: \"\",\n      userID: \"\" // dayCreate: \"\",\n      // lastDaySignIn: \"\",\n      // userImg: \"\",\n\n    });\n    onMounted(async () => {\n      const res = await axios.get(\"http://localhost:8081/user/info\", {\n        headers: {\n          Authorization: \"Bearer \" + localStorage.getItem(\"token\")\n        }\n      });\n      userInfo.userID = res.data.id;\n      userInfo.email = res.data.email;\n      userInfo.role = res.data.authorities[0].authority;\n      userInfo.userName = res.data.username;\n    }); // UPLOAD FILE AND GET URL FROM STORAGE\n    // const storage = getStorage();\n    // const database = getDatabase();\n    // const databaseRef = dbRef(database);\n    // async function onchangeFile(event) {\n    //   const file = event.target.files[0];\n    //   if (file) {\n    //     const fileRef = stRef(storage, file.name);\n    //     //UPLOAD FILE\n    //     uploadBytes(fileRef, file).then((data) => {\n    //       console.log(data);\n    //       const newFile = push(databaseRef);\n    //       set(newFile, {\n    //         name: file.name,\n    //       });\n    //     });\n    //     //DOWNLOAD FILE\n    //     getDownloadURL(fileRef).then((url) => {\n    //       console.log(url);\n    //       updateProfile(getAuth().currentUser, { photoURL: url });\n    //     });\n    //   }\n    // }\n    // // NEU DANG NHAP THANH CONG LAY THONG TIN VE TAI KHOAN\n    // let auth;\n    // onMounted(() => {\n    //   auth = getAuth();\n    //   onAuthStateChanged(auth, (user) => {\n    //     if (user) {\n    //       userInfo.email = user.email;\n    //       userInfo.userName = user.displayName;\n    //       userInfo.userID = user.uid;\n    //       userInfo.dayCreate = user.metadata.creationTime;\n    //       userInfo.lastDaySignIn = user.metadata.lastSignInTime;\n    //       userInfo.userImg = user.photoURL;\n    //     } else {\n    //       return;\n    //     }\n    //   });\n    // });\n\n    return {\n      userInfo // onchangeFile,\n      // onclickBtn\n\n    };\n  }\n\n};","map":{"version":3,"mappings":"AAkDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAASA,SAAT,EAAoBC,QAApB,QAAoC,KAApC,C,CACA;;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,eAAe;AACbC,OAAK,GAAG;AACN,UAAMC,QAAO,GAAIH,QAAQ,CAAC;AACxBI,WAAK,EAAE,EADiB;AAExBC,cAAQ,EAAE,EAFc;AAGxBC,UAAI,EAAE,EAHkB;AAIxBC,YAAM,EAAE,EAJgB,CAKxB;AACA;AACA;;AAPwB,KAAD,CAAzB;AAUAR,aAAS,CAAC,YAAY;AACpB,YAAMS,GAAE,GAAI,MAAMP,KAAK,CAACQ,GAAN,CAAU,iCAAV,EAA6C;AAC7DC,eAAO,EAAE;AACPC,uBAAa,EAAE,YAAYC,YAAY,CAACC,OAAb,CAAqB,OAArB;AADpB;AADoD,OAA7C,CAAlB;AAMAV,cAAQ,CAACI,MAAT,GAAkBC,GAAG,CAACM,IAAJ,CAASC,EAA3B;AACAZ,cAAQ,CAACC,KAAT,GAAiBI,GAAG,CAACM,IAAJ,CAASV,KAA1B;AACAD,cAAQ,CAACG,IAAT,GAAgBE,GAAG,CAACM,IAAJ,CAASE,WAAT,CAAqB,CAArB,EAAwBC,SAAxC;AACAd,cAAQ,CAACE,QAAT,GAAoBG,GAAG,CAACM,IAAJ,CAASI,QAA7B;AACD,KAXQ,CAAT,CAXM,CAwBN;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AACA,WAAO;AACLf,cADK,CAEL;AACA;;AAHK,KAAP;AAKD;;AAzEY,CAAf","names":["onMounted","reactive","axios","setup","userInfo","email","userName","role","userID","res","get","headers","Authorization","localStorage","getItem","data","id","authorities","authority","username"],"sourceRoot":"","sources":["D:\\Java\\movie-website-project-1\\src\\components\\UserProfile.vue"],"sourcesContent":["<template>\r\n  <h1>THÔNG TIN TÀI KHOẢN</h1>\r\n  <div>\r\n    <article id=\"one\">\r\n      <img\r\n        src=\"http://fc05.deviantart.net/fs71/f/2012/002/3/a/my_avatar_facebook_style_by_dairon11-d4l4n5w.jpg\"\r\n        alt=\"\"\r\n      />\r\n      <br />\r\n      <br />\r\n      <br />\r\n      <!-- <h3>\r\n        <i style=\"color: blue\"\r\n          >Thay đổi ảnh đại diện <br /><span\r\n            >Hệ thống đang cải thiện, vui lòng\r\n            <strong>(chọn ảnh và tải lại trang)</strong> 2 lần để có ảnh\r\n          </span></i\r\n        >\r\n      </h3>\r\n      <div class=\"component-item\">\r\n        <input\r\n          type=\"file\"\r\n          name=\"\"\r\n          id=\"imgSrc\"\r\n          accept=\"image/*\"\r\n          placeholder=\"Ảnh đại diện\"\r\n          @change=\"onchangeFile\"\r\n        />\r\n      </div> -->\r\n      <!-- <button @click=\"onclickBtn\"></button> -->\r\n    </article>\r\n    <article id=\"two\">\r\n      <p><strong>Tên đăng nhập: </strong> {{ userInfo.userName }}</p>\r\n      <p><strong>Địa chỉ Email: </strong>{{ userInfo.email }}</p>\r\n      <p><strong>ID: </strong> {{ userInfo.userID }}</p>\r\n      <!-- <p><strong>Ngày tạo: </strong> {{ userInfo.dayCreate }}</p> -->\r\n      <p><strong>Vai trò: </strong> {{ userInfo.role }}</p>\r\n      <!-- <p>\r\n        <strong>Lần đăng nhập gần nhất: </strong> {{ userInfo.lastDaySignIn }}\r\n      </p> -->\r\n      <button class=\"btn btn-info\">\r\n        <router-link style=\"text-decoration: none; color: black\" to=\"/\"\r\n          >Back to Homepage</router-link\r\n        >\r\n      </button>\r\n    </article>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n// import {\r\n//   getStorage,\r\n//   ref as stRef,\r\n//   uploadBytes,\r\n//   getDownloadURL,\r\n// } from \"firebase/storage\";\r\n// import { getDatabase, ref as dbRef, push, set } from \"firebase/database\";\r\nimport { onMounted, reactive } from \"vue\";\r\n// import { getAuth, onAuthStateChanged, updateProfile } from \"firebase/auth\";\r\nimport axios from \"axios\";\r\nexport default {\r\n  setup() {\r\n    const userInfo = reactive({\r\n      email: \"\",\r\n      userName: \"\",\r\n      role: \"\",\r\n      userID: \"\",\r\n      // dayCreate: \"\",\r\n      // lastDaySignIn: \"\",\r\n      // userImg: \"\",\r\n    });\r\n\r\n    onMounted(async () => {\r\n      const res = await axios.get(\"http://localhost:8081/user/info\", {\r\n        headers: {\r\n          Authorization: \"Bearer \" + localStorage.getItem(\"token\"),\r\n        },\r\n      });\r\n\r\n      userInfo.userID = res.data.id;\r\n      userInfo.email = res.data.email;\r\n      userInfo.role = res.data.authorities[0].authority;\r\n      userInfo.userName = res.data.username;\r\n    });\r\n\r\n    // UPLOAD FILE AND GET URL FROM STORAGE\r\n    // const storage = getStorage();\r\n    // const database = getDatabase();\r\n    // const databaseRef = dbRef(database);\r\n\r\n    // async function onchangeFile(event) {\r\n    //   const file = event.target.files[0];\r\n    //   if (file) {\r\n    //     const fileRef = stRef(storage, file.name);\r\n    //     //UPLOAD FILE\r\n    //     uploadBytes(fileRef, file).then((data) => {\r\n    //       console.log(data);\r\n    //       const newFile = push(databaseRef);\r\n    //       set(newFile, {\r\n    //         name: file.name,\r\n    //       });\r\n    //     });\r\n\r\n    //     //DOWNLOAD FILE\r\n    //     getDownloadURL(fileRef).then((url) => {\r\n    //       console.log(url);\r\n    //       updateProfile(getAuth().currentUser, { photoURL: url });\r\n    //     });\r\n    //   }\r\n    // }\r\n\r\n    // // NEU DANG NHAP THANH CONG LAY THONG TIN VE TAI KHOAN\r\n    // let auth;\r\n    // onMounted(() => {\r\n    //   auth = getAuth();\r\n    //   onAuthStateChanged(auth, (user) => {\r\n    //     if (user) {\r\n    //       userInfo.email = user.email;\r\n    //       userInfo.userName = user.displayName;\r\n    //       userInfo.userID = user.uid;\r\n    //       userInfo.dayCreate = user.metadata.creationTime;\r\n    //       userInfo.lastDaySignIn = user.metadata.lastSignInTime;\r\n    //       userInfo.userImg = user.photoURL;\r\n    //     } else {\r\n    //       return;\r\n    //     }\r\n    //   });\r\n    // });\r\n    return {\r\n      userInfo,\r\n      // onchangeFile,\r\n      // onclickBtn\r\n    };\r\n  },\r\n};\r\n</script>\r\n\r\n<style scoped>\r\nh1 {\r\n  text-align: center;\r\n}\r\ndiv {\r\n  display: flex;\r\n  justify-content: center;\r\n  margin-top: 30px;\r\n}\r\narticle {\r\n  margin-left: 30px;\r\n}\r\nspan {\r\n  font-size: 12px;\r\n  color: black;\r\n}\r\n#one {\r\n  width: 300px;\r\n}\r\nstrong {\r\n  text-decoration: underline;\r\n}\r\n</style>\r\n"]},"metadata":{},"sourceType":"module"}