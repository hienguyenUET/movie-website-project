{"ast":null,"code":"import useValidate from \"@vuelidate/core\"; // import WebHeader from './WebHeader.vue'\n\nimport WebFooter from \"./WebFooter.vue\";\nimport { required, email, minLength } from \"@vuelidate/validators\";\nimport { computed, onMounted, reactive } from \"vue\";\nimport { getAuth, createUserWithEmailAndPassword, updateProfile } from \"firebase/auth\";\nimport router from \"@/router\";\nexport default {\n  name: \"SignUp\",\n  components: {\n    WebFooter\n  },\n\n  setup() {\n    const state = reactive({\n      email: \"\",\n      username: \"\",\n      password: {\n        password: \"\"\n      }\n    }); // SIGN-UP\n\n    const signUpUser = onMounted(() => {\n      let headers = new Headers();\n      headers.append(\"Access-Control-Allow-Origin\", \"http://localhost:8080\");\n      headers.append(\"Access-Control-Allow-Credentials\", \"true\");\n      headers.append(\"GET\", \"POST\", \"OPTIONS\");\n      fetch(\"http://localhost:8081/user/api/add\", {\n        method: \"POST\",\n        // headers: {\n        //   \"Content-type\": \"application/json\",\n        // },\n        headers: headers,\n        body: JSON.stringify({\n          email: state.email,\n          username: state.username,\n          password: state.password.password\n        })\n      });\n    });\n\n    const register = () => {\n      createUserWithEmailAndPassword(getAuth(), state.email, state.password.password).then(() => {\n        updateProfile(getAuth().currentUser, {\n          displayName: state.username\n        });\n        router.push(\"/login\");\n      }).catch(error => {\n        alert(error);\n      });\n    }; // CHECK VALIDATION FORM\n\n\n    const rules = computed(() => {\n      return {\n        email: {\n          required,\n          email\n        },\n        username: {\n          required\n        },\n        password: {\n          password: {\n            required,\n            minLength: minLength(6)\n          }\n        }\n      };\n    });\n    const v$ = useValidate(rules, state); //\n\n    return {\n      state,\n      v$,\n      signUpUser,\n      register\n    };\n  },\n\n  methods: {\n    submitForm() {\n      this.v$.$validate();\n    }\n\n  }\n};","map":{"version":3,"mappings":"AA8DA,OAAOA,WAAP,MAAwB,iBAAxB,C,CACA;;AACA,OAAOC,SAAP,MAAsB,iBAAtB;AACA,SAASC,QAAT,EAAmBC,KAAnB,EAA0BC,SAA1B,QAA2C,uBAA3C;AACA,SAASC,QAAT,EAAmBC,SAAnB,EAA8BC,QAA9B,QAA8C,KAA9C;AACA,SACEC,OADF,EAEEC,8BAFF,EAGEC,aAHF,QAIO,eAJP;AAMA,OAAOC,MAAP,MAAmB,UAAnB;AACA,eAAe;AACbC,MAAI,EAAE,QADO;AAEbC,YAAU,EAAE;AAAEZ;AAAF,GAFC;;AAGba,OAAK,GAAG;AACN,UAAMC,KAAI,GAAIR,QAAQ,CAAC;AACrBJ,WAAK,EAAE,EADc;AAErBa,cAAQ,EAAE,EAFW;AAGrBC,cAAQ,EAAE;AACRA,gBAAQ,EAAE;AADF;AAHW,KAAD,CAAtB,CADM,CAQN;;AACA,UAAMC,UAAS,GAAIZ,SAAS,CAAC,MAAM;AACjC,UAAIa,OAAM,GAAI,IAAIC,OAAJ,EAAd;AACAD,aAAO,CAACE,MAAR,CAAe,6BAAf,EAA8C,uBAA9C;AACAF,aAAO,CAACE,MAAR,CAAe,kCAAf,EAAmD,MAAnD;AACAF,aAAO,CAACE,MAAR,CAAe,KAAf,EAAsB,MAAtB,EAA8B,SAA9B;AACAC,WAAK,CAAC,oCAAD,EAAuC;AAC1CC,cAAM,EAAE,MADkC;AAE1C;AACA;AACA;AACAJ,eAAO,EAAEA,OALiC;AAM1CK,YAAI,EAAEC,IAAI,CAACC,SAAL,CAAe;AACnBvB,eAAK,EAAEY,KAAK,CAACZ,KADM;AAEnBa,kBAAQ,EAAED,KAAK,CAACC,QAFG;AAGnBC,kBAAQ,EAAEF,KAAK,CAACE,QAAN,CAAeA;AAHN,SAAf;AANoC,OAAvC,CAAL;AAYD,KAjB2B,CAA5B;;AAkBA,UAAMU,QAAO,GAAI,MAAM;AACrBlB,oCAA8B,CAC5BD,OAAO,EADqB,EAE5BO,KAAK,CAACZ,KAFsB,EAG5BY,KAAK,CAACE,QAAN,CAAeA,QAHa,CAA9B,CAKGW,IALH,CAKQ,MAAM;AACVlB,qBAAa,CAACF,OAAO,GAAGqB,WAAX,EAAwB;AACnCC,qBAAW,EAAEf,KAAK,CAACC;AADgB,SAAxB,CAAb;AAGAL,cAAM,CAACoB,IAAP,CAAY,QAAZ;AACD,OAVH,EAWGC,KAXH,CAWUC,KAAD,IAAW;AAChBC,aAAK,CAACD,KAAD,CAAL;AACD,OAbH;AAcD,KAfD,CA3BM,CA4CN;;;AACA,UAAME,KAAI,GAAI9B,QAAQ,CAAC,MAAM;AAC3B,aAAO;AACLF,aAAK,EAAE;AAAED,kBAAF;AAAYC;AAAZ,SADF;AAELa,gBAAQ,EAAE;AAAEd;AAAF,SAFL;AAGLe,gBAAQ,EAAE;AACRA,kBAAQ,EAAE;AAAEf,oBAAF;AAAYE,qBAAS,EAAEA,SAAS,CAAC,CAAD;AAAhC;AADF;AAHL,OAAP;AAOD,KARqB,CAAtB;AAUA,UAAMgC,EAAC,GAAIpC,WAAW,CAACmC,KAAD,EAAQpB,KAAR,CAAtB,CAvDM,CAwDN;;AACA,WAAO;AACLA,WADK;AAELqB,QAFK;AAGLlB,gBAHK;AAILS;AAJK,KAAP;AAMD,GAlEY;;AAmEbU,SAAO,EAAE;AACPC,cAAU,GAAG;AACX,WAAKF,EAAL,CAAQG,SAAR;AACD;;AAHM;AAnEI,CAAf","names":["useValidate","WebFooter","required","email","minLength","computed","onMounted","reactive","getAuth","createUserWithEmailAndPassword","updateProfile","router","name","components","setup","state","username","password","signUpUser","headers","Headers","append","fetch","method","body","JSON","stringify","register","then","currentUser","displayName","push","catch","error","alert","rules","v$","methods","submitForm","$validate"],"sourceRoot":"","sources":["D:\\Java\\movie-website-project-1\\src\\components\\SignUp.vue"],"sourcesContent":["<template>\r\n  <!-- <web-header /> -->\r\n  <div class=\"signup\">\r\n    <h1>Đăng Ký</h1>\r\n    <form @submit.prevent=\"submitForm\" class=\"components\">\r\n      <div class=\"component-item\">\r\n        <input\r\n          type=\"email\"\r\n          name=\"\"\r\n          id=\"email\"\r\n          placeholder=\"Email đăng ký\"\r\n          v-model=\"state.email\"\r\n        />\r\n        <span v-if=\"v$.email.$error\">\r\n          {{ v$.email.$errors[0].$message }}\r\n        </span>\r\n      </div>\r\n      <div class=\"component-item\">\r\n        <input\r\n          type=\"text\"\r\n          name=\"\"\r\n          id=\"username\"\r\n          placeholder=\"Tên người sử dụng\"\r\n          v-model=\"state.username\"\r\n        />\r\n        <span v-if=\"v$.username.$error\">\r\n          {{ v$.username.$errors[0].$message }}\r\n        </span>\r\n      </div>\r\n      <div class=\"component-item\">\r\n        <input\r\n          type=\"password\"\r\n          id=\"password\"\r\n          placeholder=\"Mật khẩu\"\r\n          v-model=\"state.password.password\"\r\n        />\r\n        <span v-if=\"v$.password.password.$error\">\r\n          {{ v$.password.password.$errors[0].$message }}\r\n        </span>\r\n      </div>\r\n      <!-- <div class=\"component-item\">\r\n        <input\r\n          type=\"text\"\r\n          name=\"\"\r\n          id=\"img\"\r\n          placeholder=\"Ảnh đại diện\"\r\n          v-model=\"state.imageSrc\"\r\n        />\r\n      </div> -->\r\n      <div class=\"component-item\" id=\"btn\">\r\n        <button @click=\"signUpUser\" type=\"submit\">Đăng ký</button>\r\n      </div>\r\n      <div class=\"change-route\">\r\n        <span>Bạn đã có tài khoản?</span>\r\n        <span><router-link to=\"/login\">Đăng Nhập</router-link></span>\r\n      </div>\r\n    </form>\r\n  </div>\r\n  <web-footer />\r\n</template>\r\n\r\n<script>\r\nimport useValidate from \"@vuelidate/core\";\r\n// import WebHeader from './WebHeader.vue'\r\nimport WebFooter from \"./WebFooter.vue\";\r\nimport { required, email, minLength } from \"@vuelidate/validators\";\r\nimport { computed, onMounted, reactive } from \"vue\";\r\nimport {\r\n  getAuth,\r\n  createUserWithEmailAndPassword,\r\n  updateProfile,\r\n} from \"firebase/auth\";\r\n\r\nimport router from \"@/router\";\r\nexport default {\r\n  name: \"SignUp\",\r\n  components: { WebFooter },\r\n  setup() {\r\n    const state = reactive({\r\n      email: \"\",\r\n      username: \"\",\r\n      password: {\r\n        password: \"\",\r\n      },\r\n    });\r\n    // SIGN-UP\r\n    const signUpUser = onMounted(() => {\r\n      let headers = new Headers();\r\n      headers.append(\"Access-Control-Allow-Origin\", \"http://localhost:8080\");\r\n      headers.append(\"Access-Control-Allow-Credentials\", \"true\");\r\n      headers.append(\"GET\", \"POST\", \"OPTIONS\");\r\n      fetch(\"http://localhost:8081/user/api/add\", {\r\n        method: \"POST\",\r\n        // headers: {\r\n        //   \"Content-type\": \"application/json\",\r\n        // },\r\n        headers: headers,\r\n        body: JSON.stringify({\r\n          email: state.email,\r\n          username: state.username,\r\n          password: state.password.password,\r\n        }),\r\n      });\r\n    });\r\n    const register = () => {\r\n      createUserWithEmailAndPassword(\r\n        getAuth(),\r\n        state.email,\r\n        state.password.password\r\n      )\r\n        .then(() => {\r\n          updateProfile(getAuth().currentUser, {\r\n            displayName: state.username,\r\n          });\r\n          router.push(\"/login\");\r\n        })\r\n        .catch((error) => {\r\n          alert(error);\r\n        });\r\n    };\r\n\r\n    // CHECK VALIDATION FORM\r\n    const rules = computed(() => {\r\n      return {\r\n        email: { required, email },\r\n        username: { required },\r\n        password: {\r\n          password: { required, minLength: minLength(6) },\r\n        },\r\n      };\r\n    });\r\n\r\n    const v$ = useValidate(rules, state);\r\n    //\r\n    return {\r\n      state,\r\n      v$,\r\n      signUpUser,\r\n      register,\r\n    };\r\n  },\r\n  methods: {\r\n    submitForm() {\r\n      this.v$.$validate();\r\n    },\r\n  },\r\n};\r\n</script>\r\n<style scoped>\r\nlabel {\r\n  font-size: 20px;\r\n}\r\n.components {\r\n  display: flex;\r\n  flex-direction: column;\r\n  border-top: 2px;\r\n  padding-left: 20px;\r\n}\r\n.signup {\r\n  box-sizing: content-box;\r\n  max-width: 500px;\r\n  border: none;\r\n  border-radius: 10px;\r\n  margin: 0 auto;\r\n  margin-top: 100px;\r\n  background: linear-gradient(to bottom right, rgb(24, 173, 116), #3498db);\r\n}\r\n.signup input {\r\n  padding-left: 15px;\r\n  margin-top: 20px;\r\n  margin-bottom: 20px;\r\n  width: 460px;\r\n  height: 50px;\r\n  border-radius: 5px;\r\n  border: none;\r\n}\r\n#btn {\r\n  padding-bottom: 40px;\r\n  margin-top: 40px;\r\n}\r\n.signup button:hover {\r\n  background-color: rgb(94, 94, 226);\r\n}\r\n.signup button {\r\n  text-align: center;\r\n  font-size: 20px;\r\n  width: 460px;\r\n  height: 50px;\r\n  color: #fff;\r\n  background-color: green;\r\n  border: none;\r\n  border-radius: 5px;\r\n  transition: 0.5s;\r\n}\r\n.signup h1 {\r\n  text-align: center;\r\n  padding-top: 20px;\r\n  padding-bottom: 10px;\r\n  border-bottom: 2px solid rgb(212, 199, 199);\r\n  width: 430px;\r\n  margin: 20px auto;\r\n}\r\n.component-item span {\r\n  color: rgb(180, 32, 32);\r\n}\r\n#checkbox span {\r\n  color: #000;\r\n}\r\n.change-route {\r\n  text-align: center;\r\n  margin-bottom: 30px;\r\n}\r\n</style>\r\n"]},"metadata":{},"sourceType":"module"}