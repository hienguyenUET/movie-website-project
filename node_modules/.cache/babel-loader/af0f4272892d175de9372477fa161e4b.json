{"ast":null,"code":"import useValidate from \"@vuelidate/core\";\nimport { required, email, minLength } from \"@vuelidate/validators\";\nimport { computed, reactive, ref, onMounted, axios } from \"vue\"; // import WebHeader from \"./WebHeader.vue\";\n\nimport WebFooter from \"./WebFooter.vue\";\nimport { getAuth, signInWithEmailAndPassword, signInWithPopup, FacebookAuthProvider } from \"firebase/auth\";\nimport router from \"@/router\";\nexport default {\n  components: {\n    WebFooter\n  },\n\n  setup() {\n    const state = reactive({\n      email: \"\",\n      password: {\n        password: \"\"\n      }\n    });\n    const checkLogin = onMounted(async () => {\n      const result = await axios.post(\"localhost:8081/login\");\n      console.log(err.result.data);\n\n      if (result.statusCode === 200 && result.data.length > 0) {\n        localStorage.setItem(\"user-info\", JSON.stringify(result.data[0]));\n        router.push(\"/\");\n      }\n    }); //LOGIN FACEBOOK\n\n    const auth = getAuth();\n    const provider = new FacebookAuthProvider();\n    const errMsg = ref();\n\n    const fbLogin = () => {\n      signInWithPopup(auth, provider).then(() => {\n        router.push(\"/\");\n      });\n    }; // LOGIN USER\n\n\n    const login = () => {\n      signInWithEmailAndPassword(auth, state.email, state.password).then(() => {\n        router.push(\"/\");\n      }).catch(error => {\n        switch (error.code) {\n          case \"auth/invalid-email\":\n            errMsg.value = \"Invalid email\";\n            break;\n\n          case \"auth/user-not-found\":\n            errMsg.value = \"No account with that email was found\";\n            break;\n\n          case \"auth/wrong-password\":\n            errMsg.value = \"Incorrect password\";\n            break;\n\n          default:\n            errMsg.value = \"Email or password was incorrect\";\n            break;\n        }\n      });\n    }; //CHECK VALIDATION FORM\n\n\n    const rules = computed(() => {\n      return {\n        email: {\n          required,\n          email\n        },\n        password: {\n          password: required,\n          minLength: minLength(6)\n        }\n      };\n    });\n    const v$ = useValidate(rules, state); //\n\n    return {\n      state,\n      v$,\n      checkLogin,\n      login,\n      fbLogin,\n      errMsg\n    };\n  },\n\n  methods: {\n    submitForm() {\n      this.v$.$validate();\n    }\n\n  }\n};","map":{"version":3,"mappings":"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","names":["useValidate","required","email","minLength","computed","reactive","ref","onMounted","axios","WebFooter","getAuth","signInWithEmailAndPassword","signInWithPopup","FacebookAuthProvider","router","components","setup","state","password","checkLogin","result","post","console","log","err","data","statusCode","length","localStorage","setItem","JSON","stringify","push","auth","provider","errMsg","fbLogin","then","login","catch","error","code","value","rules","v$","methods","submitForm","$validate"],"sourceRoot":"","sources":["D:\\Java\\movie-website-project-1\\src\\components\\LoginForm.vue"],"sourcesContent":["<template>\r\n  <!-- <web-header /> -->\r\n  <div class=\"login\">\r\n    <h1>Đăng Nhập</h1>\r\n    <form @submit.prevent=\"submitForm\" class=\"components\">\r\n      <div class=\"component-item\">\r\n        <input\r\n          type=\"text\"\r\n          name=\"\"\r\n          id=\"email\"\r\n          placeholder=\"Email đăng nhập\"\r\n          v-model=\"state.email\"\r\n        />\r\n        <span v-if=\"v$.email.$error\">\r\n          {{ v$.email.$errors[0].$message }}\r\n        </span>\r\n      </div>\r\n      <div class=\"component-item\">\r\n        <input\r\n          type=\"password\"\r\n          id=\"password\"\r\n          placeholder=\"Mật khẩu\"\r\n          v-model=\"state.password\"\r\n        />\r\n        <span v-if=\"v$.password.$error\">\r\n          {{ v$.password.$errors[0].$message }}\r\n        </span>\r\n      </div>\r\n      <p v-if=\"errMsg\">{{ errMsg }}</p>\r\n      <div class=\"component-item\" id=\"btn\">\r\n        <button @click=\"checkLogin\" type=\"submit\">Đăng nhập</button>\r\n      </div>\r\n      <div class=\"component-item\" id=\"btn1\">\r\n        <a id=\"fb\" @click=\"fbLogin\">\r\n          Đăng nhập với Facebook\r\n          <svg\r\n            xmlns=\"http://www.w3.org/2000/svg\"\r\n            width=\"16\"\r\n            height=\"16\"\r\n            fill=\"currentColor\"\r\n            class=\"bi bi-facebook\"\r\n            viewBox=\"0 0 16 16\"\r\n          >\r\n            <path\r\n              d=\"M16 8.049c0-4.446-3.582-8.05-8-8.05C3.58 0-.002 3.603-.002 8.05c0 4.017 2.926 7.347 6.75 7.951v-5.625h-2.03V8.05H6.75V6.275c0-2.017 1.195-3.131 3.022-3.131.876 0 1.791.157 1.791.157v1.98h-1.009c-.993 0-1.303.621-1.303 1.258v1.51h2.218l-.354 2.326H9.25V16c3.824-.604 6.75-3.934 6.75-7.951z\"\r\n            />\r\n          </svg>\r\n        </a>\r\n      </div>\r\n      <div class=\"change-route\">\r\n        <span>Bạn chưa có tài khoản?</span>\r\n        <span><router-link id=\"route\" to=\"/signup\">Đăng Ký</router-link></span>\r\n      </div>\r\n    </form>\r\n  </div>\r\n  <web-footer />\r\n</template>\r\n\r\n<script>\r\nimport useValidate from \"@vuelidate/core\";\r\nimport { required, email, minLength } from \"@vuelidate/validators\";\r\nimport { computed, reactive, ref, onMounted, axios } from \"vue\";\r\n// import WebHeader from \"./WebHeader.vue\";\r\nimport WebFooter from \"./WebFooter.vue\";\r\nimport {\r\n  getAuth,\r\n  signInWithEmailAndPassword,\r\n  signInWithPopup,\r\n  FacebookAuthProvider,\r\n} from \"firebase/auth\";\r\nimport router from \"@/router\";\r\nexport default {\r\n  components: {\r\n    WebFooter,\r\n  },\r\n  setup() {\r\n    const state = reactive({\r\n      email: \"\",\r\n      password: {\r\n        password: \"\",\r\n      },\r\n    });\r\n\r\n    const checkLogin = onMounted(async () => {\r\n      const result = await axios.post(\"localhost:8081/login\");\r\n      console.log(err.result.data);\r\n      if (result.statusCode === 200 && result.data.length > 0) {\r\n        localStorage.setItem(\"user-info\", JSON.stringify(result.data[0]));\r\n        router.push(\"/\");\r\n      }\r\n    });\r\n\r\n    //LOGIN FACEBOOK\r\n    const auth = getAuth();\r\n    const provider = new FacebookAuthProvider();\r\n    const errMsg = ref();\r\n    const fbLogin = () => {\r\n      signInWithPopup(auth, provider).then(() => {\r\n        router.push(\"/\");\r\n      });\r\n    };\r\n\r\n    // LOGIN USER\r\n    const login = () => {\r\n      signInWithEmailAndPassword(auth, state.email, state.password)\r\n        .then(() => {\r\n          router.push(\"/\");\r\n        })\r\n        .catch((error) => {\r\n          switch (error.code) {\r\n            case \"auth/invalid-email\":\r\n              errMsg.value = \"Invalid email\";\r\n              break;\r\n            case \"auth/user-not-found\":\r\n              errMsg.value = \"No account with that email was found\";\r\n              break;\r\n            case \"auth/wrong-password\":\r\n              errMsg.value = \"Incorrect password\";\r\n              break;\r\n            default:\r\n              errMsg.value = \"Email or password was incorrect\";\r\n              break;\r\n          }\r\n        });\r\n    };\r\n\r\n    //CHECK VALIDATION FORM\r\n    const rules = computed(() => {\r\n      return {\r\n        email: { required, email },\r\n        password: {\r\n          password: required,\r\n          minLength: minLength(6),\r\n        },\r\n      };\r\n    });\r\n\r\n    const v$ = useValidate(rules, state);\r\n    //\r\n    return {\r\n      state,\r\n      v$,\r\n      checkLogin,\r\n      login,\r\n      fbLogin,\r\n      errMsg,\r\n    };\r\n  },\r\n  methods: {\r\n    submitForm() {\r\n      this.v$.$validate();\r\n    },\r\n  },\r\n};\r\n</script>\r\n<style scoped>\r\nlabel {\r\n  font-size: 20px;\r\n}\r\n.components {\r\n  display: flex;\r\n  flex-direction: column;\r\n  border-top: 2px;\r\n  padding-left: 20px;\r\n}\r\n.login {\r\n  box-sizing: content-box;\r\n  max-width: 500px;\r\n  border: none;\r\n  border-radius: 10px;\r\n  margin: 0 auto;\r\n  margin-top: 100px;\r\n  background: linear-gradient(to bottom right, rgb(223, 119, 209), #1cd1d1);\r\n}\r\n.login input {\r\n  padding-left: 15px;\r\n  margin-top: 20px;\r\n  margin-bottom: 40px;\r\n  width: 460px;\r\n  height: 50px;\r\n  border-radius: 5px;\r\n  border: none;\r\n}\r\n#btn {\r\n  padding-top: 20px;\r\n  padding-bottom: 40px;\r\n}\r\n.login button {\r\n  text-align: center;\r\n  font-size: 20px;\r\n  width: 460px;\r\n  height: 50px;\r\n  color: #fff;\r\n  background-color: rgb(26, 103, 85);\r\n  border: none;\r\n  border-radius: 5px;\r\n}\r\n.login h1 {\r\n  color: #000;\r\n  font-family: \"Trebuchet MS\", \"Lucida Sans Unicode\", \"Lucida Grande\",\r\n    \"Lucida Sans\", Arial, sans-serif;\r\n  text-align: center;\r\n  padding-top: 20px;\r\n  padding-bottom: 10px;\r\n  border-bottom: 2px solid rgb(212, 199, 199);\r\n  width: 430px;\r\n  margin: 20px auto;\r\n}\r\n.change-route {\r\n  margin-bottom: 30px;\r\n  text-align: center;\r\n}\r\n.component-item span {\r\n  color: rgb(180, 32, 32);\r\n}\r\np {\r\n  color: rgb(180, 32, 32);\r\n  text-align: center;\r\n  text-transform: uppercase;\r\n  font-weight: 500;\r\n}\r\n#fb {\r\n  width: 300px;\r\n  height: 30px;\r\n  text-decoration: underline;\r\n  color: rgb(64, 64, 188);\r\n  cursor: pointer;\r\n}\r\n#btn1 {\r\n  margin-left: auto;\r\n  margin-right: auto;\r\n  margin-bottom: 20px;\r\n}\r\n#route {\r\n  color: green;\r\n}\r\n</style>\r\n"]},"metadata":{},"sourceType":"module"}