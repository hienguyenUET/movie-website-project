{"ast":null,"code":"import useValidate from \"@vuelidate/core\"; // import WebHeader from './WebHeader.vue'\n\nimport WebFooter from \"./WebFooter.vue\";\nimport { required, email, minLength } from \"@vuelidate/validators\";\nimport { computed, onMounted, reactive } from \"vue\";\nimport { getAuth, createUserWithEmailAndPassword, updateProfile } from \"firebase/auth\"; // import router from \"@/router\";\n\nimport { useRouter } from \"vue-router\";\nexport default {\n  name: \"SignUp\",\n  components: {\n    WebFooter\n  },\n\n  setup() {\n    const router = useRouter();\n    const state = reactive({\n      email: \"\",\n      username: \"\",\n      name: \"\",\n      password: {\n        password: \"\"\n      }\n    }); // SIGN-UP\n\n    const signUpUser = onMounted(() => {\n      fetch(\"http://localhost:8081/signup\", {\n        method: \"POST\",\n        headers: {\n          \"Content-type\": \"application/json\"\n        },\n        body: JSON.stringify({\n          email: state.email,\n          username: state.username,\n          name: state.name,\n          password: state.password.password\n        })\n      }).then(result => {\n        console.log(result);\n\n        if (result.status === 200) {\n          router.push(\"/\");\n        }\n      });\n    });\n\n    const register = () => {\n      createUserWithEmailAndPassword(getAuth(), state.email, state.password.password).then(() => {\n        updateProfile(getAuth().currentUser, {\n          displayName: state.username\n        }); // router.push(\"/login\");\n\n        router.push(\"http://localhost:8081/user/api/add\");\n      }).catch(error => {\n        alert(error);\n      });\n    }; // CHECK VALIDATION FORM\n\n\n    const rules = computed(() => {\n      return {\n        email: {\n          required,\n          email\n        },\n        username: {\n          required\n        },\n        name: {\n          required\n        },\n        password: {\n          password: {\n            required,\n            minLength: minLength(6)\n          }\n        }\n      };\n    });\n    const v$ = useValidate(rules, state); //\n\n    return {\n      state,\n      v$,\n      signUpUser,\n      register\n    };\n  },\n\n  methods: {\n    submitForm() {\n      this.v$.$validate();\n    }\n\n  }\n};","map":{"version":3,"mappings":"AA0EA,OAAOA,WAAP,MAAwB,iBAAxB,C,CACA;;AACA,OAAOC,SAAP,MAAsB,iBAAtB;AACA,SAASC,QAAT,EAAmBC,KAAnB,EAA0BC,SAA1B,QAA2C,uBAA3C;AACA,SAASC,QAAT,EAAmBC,SAAnB,EAA8BC,QAA9B,QAA8C,KAA9C;AACA,SACEC,OADF,EAEEC,8BAFF,EAGEC,aAHF,QAIO,eAJP,C,CAMA;;AACA,SAASC,SAAT,QAA0B,YAA1B;AACA,eAAe;AACbC,MAAI,EAAE,QADO;AAEbC,YAAU,EAAE;AAAEZ;AAAF,GAFC;;AAGba,OAAK,GAAG;AACN,UAAMC,MAAK,GAAIJ,SAAS,EAAxB;AACA,UAAMK,KAAI,GAAIT,QAAQ,CAAC;AACrBJ,WAAK,EAAE,EADc;AAErBc,cAAQ,EAAE,EAFW;AAGrBL,UAAI,EAAE,EAHe;AAIrBM,cAAQ,EAAE;AACRA,gBAAQ,EAAE;AADF;AAJW,KAAD,CAAtB,CAFM,CAUN;;AACA,UAAMC,UAAS,GAAIb,SAAS,CAAC,MAAM;AACjCc,WAAK,CAAC,8BAAD,EAAiC;AACpCC,cAAM,EAAE,MAD4B;AAEpCC,eAAO,EAAE;AACP,0BAAgB;AADT,SAF2B;AAKpCC,YAAI,EAAEC,IAAI,CAACC,SAAL,CAAe;AACnBtB,eAAK,EAAEa,KAAK,CAACb,KADM;AAEnBc,kBAAQ,EAAED,KAAK,CAACC,QAFG;AAGnBL,cAAI,EAAEI,KAAK,CAACJ,IAHO;AAInBM,kBAAQ,EAAEF,KAAK,CAACE,QAAN,CAAeA;AAJN,SAAf;AAL8B,OAAjC,CAAL,CAWGQ,IAXH,CAWSC,MAAD,IAAY;AAClBC,eAAO,CAACC,GAAR,CAAYF,MAAZ;;AACA,YAAIA,MAAM,CAACG,MAAP,KAAkB,GAAtB,EAA2B;AACzBf,gBAAM,CAACgB,IAAP,CAAY,GAAZ;AACF;AACD,OAhBD;AAiBD,KAlB2B,CAA5B;;AAmBA,UAAMC,QAAO,GAAI,MAAM;AACrBvB,oCAA8B,CAC5BD,OAAO,EADqB,EAE5BQ,KAAK,CAACb,KAFsB,EAG5Ba,KAAK,CAACE,QAAN,CAAeA,QAHa,CAA9B,CAKGQ,IALH,CAKQ,MAAM;AACVhB,qBAAa,CAACF,OAAO,GAAGyB,WAAX,EAAwB;AACnCC,qBAAW,EAAElB,KAAK,CAACC;AADgB,SAAxB,CAAb,CADU,CAIV;;AACAF,cAAM,CAACgB,IAAP,CAAY,oCAAZ;AACD,OAXH,EAYGI,KAZH,CAYUC,KAAD,IAAW;AAChBC,aAAK,CAACD,KAAD,CAAL;AACD,OAdH;AAeD,KAhBD,CA9BM,CAgDN;;;AACA,UAAME,KAAI,GAAIjC,QAAQ,CAAC,MAAM;AAC3B,aAAO;AACLF,aAAK,EAAE;AAAED,kBAAF;AAAYC;AAAZ,SADF;AAELc,gBAAQ,EAAE;AAAEf;AAAF,SAFL;AAGLU,YAAI,EAAE;AAAEV;AAAF,SAHD;AAILgB,gBAAQ,EAAE;AACRA,kBAAQ,EAAE;AAAEhB,oBAAF;AAAYE,qBAAS,EAAEA,SAAS,CAAC,CAAD;AAAhC;AADF;AAJL,OAAP;AAQD,KATqB,CAAtB;AAWA,UAAMmC,EAAC,GAAIvC,WAAW,CAACsC,KAAD,EAAQtB,KAAR,CAAtB,CA5DM,CA6DN;;AACA,WAAO;AACLA,WADK;AAELuB,QAFK;AAGLpB,gBAHK;AAILa;AAJK,KAAP;AAMD,GAvEY;;AAwEbQ,SAAO,EAAE;AACPC,cAAU,GAAG;AACX,WAAKF,EAAL,CAAQG,SAAR;AACD;;AAHM;AAxEI,CAAf","names":["useValidate","WebFooter","required","email","minLength","computed","onMounted","reactive","getAuth","createUserWithEmailAndPassword","updateProfile","useRouter","name","components","setup","router","state","username","password","signUpUser","fetch","method","headers","body","JSON","stringify","then","result","console","log","status","push","register","currentUser","displayName","catch","error","alert","rules","v$","methods","submitForm","$validate"],"sourceRoot":"","sources":["D:\\Java\\movie-website-project-1\\src\\components\\SignUp.vue"],"sourcesContent":["<template>\r\n  <!-- <web-header /> -->\r\n  <div class=\"signup\">\r\n    <h1>Đăng Ký</h1>\r\n    <form @submit.prevent=\"submitForm\" class=\"components\">\r\n      <div class=\"component-item\">\r\n        <input\r\n          type=\"email\"\r\n          name=\"\"\r\n          id=\"email\"\r\n          placeholder=\"Email đăng ký\"\r\n          v-model=\"state.email\"\r\n        />\r\n        <span v-if=\"v$.email.$error\">\r\n          {{ v$.email.$errors[0].$message }}\r\n        </span>\r\n      </div>\r\n      <div class=\"component-item\">\r\n        <input\r\n          type=\"text\"\r\n          name=\"\"\r\n          id=\"username\"\r\n          placeholder=\"Username\"\r\n          v-model=\"state.username\"\r\n        />\r\n        <span v-if=\"v$.username.$error\">\r\n          {{ v$.username.$errors[0].$message }}\r\n        </span>\r\n      </div>\r\n      <div class=\"component-item\">\r\n        <input\r\n          type=\"text\"\r\n          name=\"\"\r\n          id=\"name\"\r\n          placeholder=\"Tên người dùng\"\r\n          v-model=\"state.name\"\r\n        />\r\n        <span v-if=\"v$.name.$error\">\r\n          {{ v$.name.$errors[0].$message }}\r\n        </span>\r\n      </div>\r\n      <div class=\"component-item\">\r\n        <input\r\n          type=\"password\"\r\n          id=\"password\"\r\n          placeholder=\"Mật khẩu\"\r\n          v-model=\"state.password.password\"\r\n        />\r\n        <span v-if=\"v$.password.password.$error\">\r\n          {{ v$.password.password.$errors[0].$message }}\r\n        </span>\r\n      </div>\r\n      <!-- <div class=\"component-item\">\r\n        <input\r\n          type=\"text\"\r\n          name=\"\"\r\n          id=\"img\"\r\n          placeholder=\"Ảnh đại diện\"\r\n          v-model=\"state.imageSrc\"\r\n        />\r\n      </div> -->\r\n      <div class=\"component-item\" id=\"btn\">\r\n        <button @click=\"signUpUser\" type=\"submit\">Đăng ký</button>\r\n      </div>\r\n      <div class=\"change-route\">\r\n        <span>Bạn đã có tài khoản?</span>\r\n        <span><router-link to=\"/login\">Đăng Nhập</router-link></span>\r\n      </div>\r\n    </form>\r\n  </div>\r\n  <web-footer />\r\n</template>\r\n\r\n<script>\r\nimport useValidate from \"@vuelidate/core\";\r\n// import WebHeader from './WebHeader.vue'\r\nimport WebFooter from \"./WebFooter.vue\";\r\nimport { required, email, minLength } from \"@vuelidate/validators\";\r\nimport { computed, onMounted, reactive } from \"vue\";\r\nimport {\r\n  getAuth,\r\n  createUserWithEmailAndPassword,\r\n  updateProfile,\r\n} from \"firebase/auth\";\r\n\r\n// import router from \"@/router\";\r\nimport { useRouter } from \"vue-router\";\r\nexport default {\r\n  name: \"SignUp\",\r\n  components: { WebFooter },\r\n  setup() {\r\n    const router = useRouter();\r\n    const state = reactive({\r\n      email: \"\",\r\n      username: \"\",\r\n      name: \"\",\r\n      password: {\r\n        password: \"\",\r\n      },\r\n    });\r\n    // SIGN-UP\r\n    const signUpUser = onMounted(() => {\r\n      fetch(\"http://localhost:8081/signup\", {\r\n        method: \"POST\",\r\n        headers: {\r\n          \"Content-type\": \"application/json\",\r\n        },\r\n        body: JSON.stringify({\r\n          email: state.email,\r\n          username: state.username,\r\n          name: state.name,\r\n          password: state.password.password,\r\n        }),\r\n      }).then((result) => {\r\n        console.log(result);\r\n        if (result.status === 200) {\r\n          router.push(\"/\");\r\n        }\r\n      });\r\n    });\r\n    const register = () => {\r\n      createUserWithEmailAndPassword(\r\n        getAuth(),\r\n        state.email,\r\n        state.password.password\r\n      )\r\n        .then(() => {\r\n          updateProfile(getAuth().currentUser, {\r\n            displayName: state.username,\r\n          });\r\n          // router.push(\"/login\");\r\n          router.push(\"http://localhost:8081/user/api/add\");\r\n        })\r\n        .catch((error) => {\r\n          alert(error);\r\n        });\r\n    };\r\n\r\n    // CHECK VALIDATION FORM\r\n    const rules = computed(() => {\r\n      return {\r\n        email: { required, email },\r\n        username: { required },\r\n        name: { required },\r\n        password: {\r\n          password: { required, minLength: minLength(6) },\r\n        },\r\n      };\r\n    });\r\n\r\n    const v$ = useValidate(rules, state);\r\n    //\r\n    return {\r\n      state,\r\n      v$,\r\n      signUpUser,\r\n      register,\r\n    };\r\n  },\r\n  methods: {\r\n    submitForm() {\r\n      this.v$.$validate();\r\n    },\r\n  },\r\n};\r\n</script>\r\n<style scoped>\r\nlabel {\r\n  font-size: 20px;\r\n}\r\n.components {\r\n  display: flex;\r\n  flex-direction: column;\r\n  border-top: 2px;\r\n  padding-left: 20px;\r\n}\r\n.signup {\r\n  box-sizing: content-box;\r\n  max-width: 500px;\r\n  border: none;\r\n  border-radius: 10px;\r\n  margin: 0 auto;\r\n  margin-top: 100px;\r\n  background: linear-gradient(to bottom right, rgb(24, 173, 116), #3498db);\r\n}\r\n.signup input {\r\n  padding-left: 15px;\r\n  margin-top: 20px;\r\n  margin-bottom: 20px;\r\n  width: 460px;\r\n  height: 50px;\r\n  border-radius: 5px;\r\n  border: none;\r\n}\r\n#btn {\r\n  padding-bottom: 40px;\r\n  margin-top: 40px;\r\n}\r\n.signup button:hover {\r\n  background-color: rgb(94, 94, 226);\r\n}\r\n.signup button {\r\n  text-align: center;\r\n  font-size: 20px;\r\n  width: 460px;\r\n  height: 50px;\r\n  color: #fff;\r\n  background-color: green;\r\n  border: none;\r\n  border-radius: 5px;\r\n  transition: 0.5s;\r\n}\r\n.signup h1 {\r\n  text-align: center;\r\n  padding-top: 20px;\r\n  padding-bottom: 10px;\r\n  border-bottom: 2px solid rgb(212, 199, 199);\r\n  width: 430px;\r\n  margin: 20px auto;\r\n}\r\n.component-item span {\r\n  color: rgb(180, 32, 32);\r\n}\r\n#checkbox span {\r\n  color: #000;\r\n}\r\n.change-route {\r\n  text-align: center;\r\n  margin-bottom: 30px;\r\n}\r\n</style>\r\n"]},"metadata":{},"sourceType":"module"}